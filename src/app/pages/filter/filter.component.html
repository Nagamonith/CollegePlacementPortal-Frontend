<div class="container mt-4">
  <h2 class="mb-4">Filter Eligible Students</h2>

  <!-- Company Dropdown -->
  <div class="mb-3">
    <label for="companySelect" class="form-label">Select a Company</label>
    <select id="companySelect" class="form-select" [(ngModel)]="selectedCompanyId" (change)="onCompanyChange()" name="companyId" required>
      <option [ngValue]="null">-- Choose a company --</option>
      <option *ngFor="let company of companies" [ngValue]="company.companyId">
        {{ company.name }}
      </option>
    </select>
  </div>

  <!-- Selected Company Details -->
  <div *ngIf="selectedCompany" class="card p-3 mb-4 shadow-sm">
    <h5>Company Details</h5>
    <p><strong>Name:</strong> {{ selectedCompany.name }}</p>
    <p><strong>Role:</strong> {{ selectedCompany.jobRole }}</p>
    <p><strong>Package:</strong> â‚¹{{ selectedCompany.package }} LPA</p>
  </div>

  <!-- Filter Button -->
  <button class="btn btn-primary mb-4" (click)="filterStudents()" [disabled]="!selectedCompanyId">Filter Eligible Students</button>

  <!-- Results Table -->
  <div *ngIf="showResults">
    <h4>Eligible Students ({{ eligibleStudents.length }})</h4>
    <button class="btn btn-success mb-3" (click)="exportToExcel()" [disabled]="eligibleStudents.length === 0">Export to Excel</button>

    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Branch</th>
          <th>CGPA</th>
          <th>Skills</th>
          <th>Phone</th>
          <th>Backlogs</th>
          <th>Passout Year</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of eligibleStudents">
          <td>{{ student.name }}</td>
          <td>{{ student.branch }}</td>
          <td>{{ student.cgpa }}</td>
          <td>{{ student.skills }}</td>
          <td>{{ student.phone }}</td>
          <td>{{ student.backlogs }}</td>
          <td>{{ student.passoutYear }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
