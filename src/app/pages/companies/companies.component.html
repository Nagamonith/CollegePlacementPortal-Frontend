<div class="container mt-5">

  <!-- Form Section for Company -->
  <section class="section-container mb-5 p-4 rounded">
    <h4 class="mb-4 text-primary fw-semibold">{{ isEdit ? 'Edit Company' : 'Add New Company' }}</h4>

    <form (ngSubmit)="submitCompany()" #companyForm="ngForm" novalidate>
      <div class="row row-cols-1 row-cols-md-2 g-4">

        <div>
          <label class="form-label">Company Name</label>
          <input [(ngModel)]="newCompany.name" name="name" class="form-control form-control-lg" placeholder="Company Name" required />
        </div>

        <div>
          <label class="form-label">Job Role</label>
          <input [(ngModel)]="newCompany.jobRole" name="jobRole" class="form-control form-control-lg" placeholder="Job Role" required />
        </div>

        <div>
          <label class="form-label">Package (LPA)</label>
          <input [(ngModel)]="newCompany.package" name="package" type="number" min="0" class="form-control form-control-lg" placeholder="Package (LPA)" required />
        </div>

        <div>
          <label class="form-label">Required CGPA</label>
          <input [(ngModel)]="newCompany.requiredCGPA" name="requiredCGPA" type="number" min="0" max="10" step="0.1" class="form-control form-control-lg" placeholder="Required CGPA" required />
        </div>

        <div>
          <label class="form-label">Allowed Backlogs</label>
          <input [(ngModel)]="newCompany.allowedBacklogs" name="allowedBacklogs" type="number" min="0" class="form-control form-control-lg" placeholder="Allowed Backlogs" required />
        </div>

        <div>
          <label class="form-label">Eligible Passout Year</label>
          <input [(ngModel)]="newCompany.eligiblePassoutYear" name="eligiblePassoutYear" type="number" class="form-control form-control-lg" placeholder="Passout Year" required />
        </div>

        <div>
          <label class="form-label">Required Skills</label>
          <input [(ngModel)]="newCompany.requiredSkills" name="requiredSkills" class="form-control form-control-lg" placeholder="Skills (comma-separated)" required />
        </div>

        <div>
          <label class="form-label">Category</label>
          <input [(ngModel)]="newCompany.category" name="category" class="form-control form-control-lg" placeholder="Category" required />
        </div>

        <div>
          <label class="form-label">Location</label>
          <input [(ngModel)]="newCompany.location" name="location" class="form-control form-control-lg" placeholder="Location" required />
        </div>

        <div class="col-12">
          <label class="form-label">Description</label>
          <textarea [(ngModel)]="newCompany.description" name="description" class="form-control form-control-lg" rows="3" placeholder="Company Description" required></textarea>
        </div>

      </div>

      <div class="mt-4 d-flex gap-3 flex-wrap">
        <button class="btn btn-success btn-lg px-4" type="submit" [disabled]="companyForm.invalid">
          {{ isEdit ? 'Update' : 'Add' }} Company
        </button>
        <button *ngIf="isEdit" type="button" class="btn btn-secondary btn-lg px-4" (click)="resetCompanyForm()">Cancel</button>
      </div>
    </form>

    <div *ngIf="message" class="mt-3 text-success fw-semibold">{{ message }}</div>
  </section>

  <!-- Table Section for Companies -->
  <section class="section-container p-4 rounded">
    <h4 class="mb-4 text-primary fw-semibold">All Companies</h4>

    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center table-hover table-striped">
        <thead class="table-light sticky-header">
          <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Role</th>
            <th>Package</th>
            <th>CGPA</th>
            <th>Backlogs</th>
            <th>Passout</th>
            <th>Skills</th>
            <th>Location</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let company of companies">
            <td>{{ company.name }}</td>
            <td>{{ company.category }}</td>
            <td>{{ company.jobRole }}</td>
            <td>{{ company.package }}</td>
            <td>{{ company.requiredCGPA }}</td>
            <td>{{ company.allowedBacklogs }}</td>
            <td>{{ company.eligiblePassoutYear }}</td>
            <td>{{ company.requiredSkills }}</td>
            <td>{{ company.location }}</td>
            <td>{{ company.description }}</td>
            <td>
              <button class="btn btn-sm btn-outline-info me-2" (click)="editCompany(company)">Edit</button>
              <button class="btn btn-sm btn-outline-danger" (click)="deleteCompany(company.companyId)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</div>
